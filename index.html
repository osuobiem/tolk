<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Socket.io Test File</title>

    <style>
      #f-btn {
        padding: 10px 15px;
        border-radius: 5px;
        color: #ffffff;
        background-color: #2a46de;
        border: 0;
        margin-top: 10px;
      }

      #f-btn:hover {
        background-color: #2136ac;
        cursor: pointer;
      }

      #message {
        display: block;
        border-radius: 5px;
      }
    </style>

    <script src="/socket.io/socket.io.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <h4>Chat</h4>
    <div id="message-area"></div>
    <form id="chat-form">
      <textarea
        name="message"
        placeholder="Type message here"
        cols="30"
        rows="10"
        id="message"
      ></textarea>
      <button id="f-btn">Send</button>
    </form>

    <script>
      $(function() {
        var socket = io();

        $("#chat-form").submit(e => {
          e.preventDefault();

          if ($("#message").val().length) {
            socket.emit("message", $("#message").val());
            $("#message").val("");
            return false;
          } else {
            alert("Message field can not be empty!");
          }
        });

        socket.on("message", msg => {
          $("#message-area").append($("<p>").text(msg));
        });
      });
    </script>
  </body>
</html>
